[gd_scene load_steps=15 format=3 uid="uid://dqg13lpbwrv7"]

[ext_resource type="Texture2D" uid="uid://bdsu8mixci7tf" path="res://Player/Sprites/Brook.png" id="1_hl47a"]
[ext_resource type="Script" path="res://Player/Scripts/PlayerCharacter.gd" id="1_hu618"]
[ext_resource type="Script" path="res://Player/Scripts/PlayerMovement.gd" id="1_n46fh"]
[ext_resource type="Script" path="res://Player/Scripts/PlayerInputs.gd" id="3_fxyqo"]
[ext_resource type="Script" path="res://Player/Scripts/PlayerSpeedThresholds.gd" id="4_33erx"]
[ext_resource type="Script" path="res://Player/Scripts/HUD/SpeedValue.gd" id="4_hhy2o"]
[ext_resource type="Script" path="res://Player/Scripts/PlayerRotator.gd" id="4_mluyg"]
[ext_resource type="Texture2D" uid="uid://4a3ooq0arxy1" path="res://Player/Sprites/direction_arrow.png" id="5_s1pth"]
[ext_resource type="Texture2D" uid="uid://bhk565yga7gwp" path="res://Player/Sprites/level2.png" id="7_ps88g"]
[ext_resource type="Texture2D" uid="uid://c18kyrevn3t0j" path="res://Player/Sprites/level1.png" id="8_361qe"]
[ext_resource type="Texture2D" uid="uid://c8wbw6m22ou1j" path="res://Player/Sprites/level3.png" id="8_alu1b"]
[ext_resource type="Script" path="res://Player/Scripts/PlayerHitboxData.gd" id="8_xetj4"]

[sub_resource type="CircleShape2D" id="CircleShape2D_upbqd"]
radius = 16.0

[sub_resource type="LabelSettings" id="LabelSettings_fvdlt"]
font_color = Color(0.854902, 0, 0.854902, 1)

[node name="PlayerCharacter" type="CharacterBody2D" node_paths=PackedStringArray("playerMovements")]
script = ExtResource("1_hu618")
playerMovements = NodePath("PlayerMovements")

[node name="PlayerSprite" type="Sprite2D" parent="."]
z_index = 1
texture = ExtResource("1_hl47a")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, 24)
shape = SubResource("CircleShape2D_upbqd")

[node name="Camera2D" type="Camera2D" parent="."]

[node name="PlayerInputs" type="Node" parent="."]
script = ExtResource("3_fxyqo")

[node name="PlayerMovements" type="Node" parent="." node_paths=PackedStringArray("playerCharacter", "playerInputs")]
script = ExtResource("1_n46fh")
playerCharacter = NodePath("..")
playerInputs = NodePath("../PlayerInputs")
accelerationPerSecond = 400.0
decelerationPerSecond = 600.0
decelerationWhileColliding = 500.0
minDecelerationWhileSteering = -50.0
maxDecelerationWhileSteering = 100.0
decelerationWhileSteeringRequiredSpeed = 300.0
decelerationWhileSteeringIncreasePerSecond = 100.0
decelerationWhileSteeringDecreasePerSecond = 150.0
rotationSpeedPerSecond = 1.5
killSpeedValue = 150.0
minSpeed = 50.0
maxSpeed = 1500.0

[node name="PlayerHUD" type="Control" parent="."]
z_index = 100
layout_mode = 3
anchors_preset = 0
offset_left = -960.0
offset_top = -536.0
offset_right = 960.0
offset_bottom = 536.0

[node name="SpeedValue" type="Label" parent="PlayerHUD" node_paths=PackedStringArray("playerMovements", "speedThresholds")]
layout_mode = 0
offset_left = 24.0
offset_top = 24.0
offset_right = 192.0
offset_bottom = 56.0
label_settings = SubResource("LabelSettings_fvdlt")
horizontal_alignment = 1
vertical_alignment = 1
script = ExtResource("4_hhy2o")
playerMovements = NodePath("../../PlayerMovements")
speedThresholds = NodePath("../../PlayerRotator/PlayerSpeedThresholds")

[node name="PlayerRotator" type="Node2D" parent="." node_paths=PackedStringArray("playerBody", "playerMovements")]
script = ExtResource("4_mluyg")
playerBody = NodePath("..")
playerMovements = NodePath("../PlayerMovements")
offsetDegrees = 90

[node name="PlayerSpeedThresholds" type="Node2D" parent="PlayerRotator" node_paths=PackedStringArray("playerMovements", "thresholdHitboxes")]
script = ExtResource("4_33erx")
playerMovements = NodePath("../../PlayerMovements")
speedThresholds = Array[float]([200.0, 550.0, 1250.0, 1500.0])
thresholdHitboxes = [null, NodePath("FirstSpeedHitbox"), NodePath("SecondSpeedHitbox"), NodePath("ThirdSpeedHitbox")]

[node name="FirstSpeedHitbox" type="Area2D" parent="PlayerRotator/PlayerSpeedThresholds" node_paths=PackedStringArray("playerMovements")]
script = ExtResource("8_xetj4")
playerMovements = NodePath("../../../PlayerMovements")
clashGroupName = "ClashArea"
damage = 2
repelDistance = 400.0
repelTime = 0.3
lossOnImpact = 100.0
clashRepelDistance = 300.0
clashRepelTime = 0.3
clashLossOnImpact = 200.0

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="PlayerRotator/PlayerSpeedThresholds/FirstSpeedHitbox"]
polygon = PackedVector2Array(-64, 32, -32, 32, -24, -32, 24, -32, 32, 32, 64, 32, 48, -48, 32, -64, -32, -64, -48, -48)

[node name="Sprite2D" type="Sprite2D" parent="PlayerRotator/PlayerSpeedThresholds/FirstSpeedHitbox"]
texture = ExtResource("8_361qe")

[node name="SecondSpeedHitbox" type="Area2D" parent="PlayerRotator/PlayerSpeedThresholds" node_paths=PackedStringArray("playerMovements")]
script = ExtResource("8_xetj4")
playerMovements = NodePath("../../../PlayerMovements")
clashGroupName = "ClashArea"
damage = 4
repelDistance = 600.0
repelTime = 0.3
lossOnImpact = 75.0
clashRepelDistance = 450.0
clashRepelTime = 0.3
clashLossOnImpact = 150.0

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="PlayerRotator/PlayerSpeedThresholds/SecondSpeedHitbox"]
polygon = PackedVector2Array(-64, 32, -40, 64, -16, 64, -32, 32, -24, -32, 24, -32, 32, 32, 16, 64, 40, 64, 64, 32, 48, -48, 32, -64, -32, -64, -48, -48)

[node name="Sprite2D" type="Sprite2D" parent="PlayerRotator/PlayerSpeedThresholds/SecondSpeedHitbox"]
texture = ExtResource("7_ps88g")

[node name="ThirdSpeedHitbox" type="Area2D" parent="PlayerRotator/PlayerSpeedThresholds" node_paths=PackedStringArray("playerMovements")]
script = ExtResource("8_xetj4")
playerMovements = NodePath("../../../PlayerMovements")
clashGroupName = "ClashArea"
damage = 6
repelDistance = 1000.0
repelTime = 0.3
lossOnImpact = 50.0
clashDamage = 2
clashRepelDistance = 750.0
clashRepelTime = 0.3
clashLossOnImpact = 100.0

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="PlayerRotator/PlayerSpeedThresholds/ThirdSpeedHitbox"]
polygon = PackedVector2Array(-64, 32, -40, 64, -16, 64, -32, 32, -24, -32, 24, -32, 32, 32, 16, 64, 40, 64, 64, 32, 48, -48, 32, -64, -32, -64, -48, -48)

[node name="Sprite2D" type="Sprite2D" parent="PlayerRotator/PlayerSpeedThresholds/ThirdSpeedHitbox"]
texture = ExtResource("8_alu1b")

[node name="Arrow" type="Sprite2D" parent="PlayerRotator"]
texture = ExtResource("5_s1pth")

[connection signal="area_entered" from="PlayerRotator/PlayerSpeedThresholds/FirstSpeedHitbox" to="PlayerRotator/PlayerSpeedThresholds/FirstSpeedHitbox" method="_on_area_entered"]
[connection signal="area_exited" from="PlayerRotator/PlayerSpeedThresholds/FirstSpeedHitbox" to="PlayerRotator/PlayerSpeedThresholds/FirstSpeedHitbox" method="_on_area_exited"]
[connection signal="body_entered" from="PlayerRotator/PlayerSpeedThresholds/FirstSpeedHitbox" to="PlayerRotator/PlayerSpeedThresholds/FirstSpeedHitbox" method="_on_body_entered"]
[connection signal="body_exited" from="PlayerRotator/PlayerSpeedThresholds/FirstSpeedHitbox" to="PlayerRotator/PlayerSpeedThresholds/FirstSpeedHitbox" method="_on_body_exited"]
[connection signal="area_entered" from="PlayerRotator/PlayerSpeedThresholds/SecondSpeedHitbox" to="PlayerRotator/PlayerSpeedThresholds/SecondSpeedHitbox" method="_on_area_entered"]
[connection signal="area_exited" from="PlayerRotator/PlayerSpeedThresholds/SecondSpeedHitbox" to="PlayerRotator/PlayerSpeedThresholds/SecondSpeedHitbox" method="_on_area_exited"]
[connection signal="body_entered" from="PlayerRotator/PlayerSpeedThresholds/SecondSpeedHitbox" to="PlayerRotator/PlayerSpeedThresholds/SecondSpeedHitbox" method="_on_body_entered"]
[connection signal="body_exited" from="PlayerRotator/PlayerSpeedThresholds/SecondSpeedHitbox" to="PlayerRotator/PlayerSpeedThresholds/SecondSpeedHitbox" method="_on_body_exited"]
[connection signal="area_entered" from="PlayerRotator/PlayerSpeedThresholds/ThirdSpeedHitbox" to="PlayerRotator/PlayerSpeedThresholds/ThirdSpeedHitbox" method="_on_area_entered"]
[connection signal="area_exited" from="PlayerRotator/PlayerSpeedThresholds/ThirdSpeedHitbox" to="PlayerRotator/PlayerSpeedThresholds/ThirdSpeedHitbox" method="_on_area_exited"]
[connection signal="body_entered" from="PlayerRotator/PlayerSpeedThresholds/ThirdSpeedHitbox" to="PlayerRotator/PlayerSpeedThresholds/ThirdSpeedHitbox" method="_on_body_entered"]
[connection signal="body_exited" from="PlayerRotator/PlayerSpeedThresholds/ThirdSpeedHitbox" to="PlayerRotator/PlayerSpeedThresholds/ThirdSpeedHitbox" method="_on_body_exited"]
